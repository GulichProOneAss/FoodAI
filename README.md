# FoodAI: Интеллектуальный помощник формирования рациона питания
Автор: Гулин Данила Андреевич
Тема ВКР: Разработка интеллектуального помощника формирования рациона питания
Описание: FoodAI — это Telegram-бот, предназначенный для помощи в формировании персонализированного рациона питания. Бот использует нейронные сети для прогнозирования калорий, витаминов и минералов, а также предоставляет рекомендации по продуктам на основе целей пользователя (похудение, набор массы, поддержание веса). Проект включает загрузку данных, предобработку, работу с моделями и взаимодействие через Telegram-интерфейс.

Основные функции





Прогноз калорий и целей: Пользователь вводит белки, жиры и углеводы, бот рассчитывает калории и рекомендует цель (похудение, набор массы, поддержание).



Прогноз витаминов и минералов: Оценка содержания витамина C, кальция, витамина B12 и железа на основе макронутриентов.



Поиск продуктов: Рекомендации продуктов по заданным калориям или содержанию витаминов/минералов.



Профиль пользователя: Настройка роста, веса, цели и исключённых продуктов.



Планирование рациона: Составление недельного плана питания с учётом калорий и целей.



Фиксация потребления: Логирование съеденных продуктов.



Уведомления: Ежедневные напоминания о приёме пищи с планом на день.



Выбор датасета: Переключение между русским и английским датасетами продуктов.

Технологии





Язык программирования: Python 3.11



Библиотеки:





python-telegram-bot==13.7 — для Telegram-бота



pandas, numpy — обработка данных



torch — нейронные сети



scikit-learn — кластеризация и масштабирование



xlwt, openpyxl — работа с Excel



gdown — загрузка файлов с Google Drive



matplotlib — визуализация



pytz — работа с часовыми поясами



Датасеты: food.csv (английский), food_translated_full.csv (русский), содержащие данные о продуктах (макронутриенты, витамины, минералы).



Модели: Предобученные нейронные сети (model.pt, calorie_model.pt, nutrient_model.pt) для прогнозирования целей, калорий и нутриентов.

Установка

Датасеты и модели автоматически загружаются из Google Drive (ID: 1X6qehMhaKQ60_r747VnrvDkUwXrPsJ2j) при запуске DataDietipynbOsnovItog.ipynb.



Убедитесь, что папка /content/FoodAI/ содержит: food.csv, food_translated_full.csv, scaler.pkl, calorie_model.pt, nutrient_model.pt, data_preprocessing.py, utils.py, model.py.



Настройте Telegram-бота:





Создайте бота через @BotFather и получите токен.



Замените TOKEN в telegram_bot.py на ваш токен (по умолчанию: 7543999760:AAEeB8PJRE41LUPn-V3WCFscMcL7lwMXGqw).

Использование





Запустите установку:





Откройте DataDietipynbOsnovItog.ipynb в Google Colab.



Выполните ячейки для установки библиотек и загрузки файлов с Google Drive.



Файлы будут размещены в /content/FoodAI/, затем скопированы в /content/.



Запустите Telegram-бота:

python telegram_bot.py





В Telegram найдите бота @BotFoodAI_Bot и отправьте команду /start.



Доступные команды:





/predict — прогноз калорий и целей.



/nutrients — прогноз витаминов и минералов.



/vitamin_search — поиск продуктов по витаминам/минералам.



/profile — настройка профиля (рост, вес, цель, исключения).



/plan — планирование рациона на неделю.



/log — фиксация потребления.



/notify — настройка уведомлений.



/set_dataset — выбор датасета (ru/en).



/cancel — отмена текущего действия.



Пример работы:





/profile → 170,70,похудение → нет (установка профиля).



/predict → 10,10,10 (170 ккал, цель: похудение, рекомендации продуктов ~170 ккал).



/plan → 200 → да (составление плана на неделю).



/log → яблоко,банан (сохранение в user_profiles.json).



/notify → 10:00 (ежедневные напоминания).

Структура проекта

FoodAI/
├── DataDietipynbOsnovItog.ipynb  # Установка библиотек и загрузка файлов
├── telegram_bot.py               # Telegram-бот
├── data_preprocessing.py         # Загрузка и предобработка данных
├── utils.py                      # Сохранение/загрузка моделей
├── model.py                      # Определение нейронных сетей
├── train.py                      # Обучение моделей
├── visualize.py                  # Визуализация данных
├── food.csv                      # Датасет (английский)
├── food_translated_full.csv      # Датасет (русский)
├── scaler.pkl                    # Скалер для данных
├── model.pt                      # Модель целей
├── calorie_model.pt              # Модель калорий
├── nutrient_model.pt             # Модель витаминов/минералов
├── user_profiles.json            # Профили пользователей
├── top_100_products.xlsx         # Выходные данные поиска
├── vitamin_products.xlsx         # Выходные данные поиска витаминов
└── README.md                     # Документация

Ограничения





Датасеты и модели загружаются из Google Drive, требуется общий доступ ("Любой пользователь с ссылкой").



Логи потребления (consumption_log) не влияют на рекомендации.



Калории в /predict рассчитываются по формуле 4*белки + 9*жиры + 4*углеводы, профиль влияет только на цель.



Уведомления отправляются даже без плана, с сообщением о его отсутствии.

Будущие улучшения





Автоматический расчёт калорий по росту/весу/возрасту (формула Mifflin-St Jeor).



Анализ логов для корректировки рекомендаций.



Команда /view_log для просмотра истории потребления.



Поддержка дополнительных языков и датасетов.

Лицензия

MIT License. См. файл LICENSE для подробностей.

Контакты





Автор: Гулин Данила Андреевич



Email: your.email@example.com



Telegram-бот: @BotFoodAI_Bot

Инструкции для проверки ВКР





Откройте DataDietipynbOsnovItog.ipynb в Google Colab.



Выполните ячейки для установки библиотек и загрузки файлов.



Запустите telegram_bot.py:

python telegram_bot.py



Протестируйте команды:





/profile → 170,70,похудение → нет.



/predict → 10,10,10 (ожидаемый результат: ~170 ккал, цель: похудение).



/plan → 200 → да (план на неделю).






/notify → 10:00 или "Отмена".



Проверьте user_profiles.json:

cat /content/FoodAI/user_profiles.json
